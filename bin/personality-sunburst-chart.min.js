var chartRenderer=require("./personality-chart-renderer"),dependencies={d3:"D3js",$:"JQuery"};Object.keys(dependencies).forEach(function(t){if("undefined"==typeof window[t])throw new Error(dependencies[t]+" is not present. Personality Sunburst Chart can't render without it.")}),module.exports=function(){"use strict";var t=function(t,i){function e(t,i){console.debug("showVizualization()");var e=o.containerId;$("#"+e).empty();var a=d3.select("#"+e).append("svg:svg"),n={d3vis:a,data:t,loadingDiv:"dummy",switchState:function(){console.debug("[switchState]")},_layout:function(){console.debug("[_layout]")},showTooltip:function(){console.debug("[showTooltip]")},id:"SystemUWidget",COLOR_PALLETTE:["#1b6ba2","#488436","#d52829","#F53B0C","#972a6b","#8c564b","#dddddd"],expandAll:function(){this.vis.selectAll("g").each(function(){var t=d3.select(this);t.datum().parent&&t.datum().parent.parent&&t.datum().parent.parent.parent&&t.attr("visibility","visible")})},collapseAll:function(){this.vis.selectAll("g").each(function(){var t=d3.select(this);null!==t.datum().parent&&null!==t.datum().parent.parent&&null!==t.datum().parent.parent.parent&&t.attr("visibility","hidden")})},addPersonImage:function(t){if(this.vis&&t){var i=this.vis.append("defs"),e=this.dimW,a=this.dimH,n=Math.min(e,a)/16.58,d=2.46*n,r="user_icon_"+this.id;i.append("pattern").attr("id",r).attr("height",1).attr("width",1).attr("patternUnits","objectBoundingBox").append("image").attr("width",d).attr("height",d).attr("x",n-d/2).attr("y",n-d/2).attr("xlink:href",t).attr("opacity",1).on("dblclick.zoom",null),this.vis.append("circle").attr("r",n).attr("stroke-width",0).attr("fill","url(#"+r+")")}}};n.dimH=o.height,n.dimW=o.width,n.d3vis.attr("width",o.visualizationWidth).attr("height",o.visualizationHeight),n.d3vis.attr("viewBox","0 -30 "+n.dimW+", "+n.dimH),chartRenderer.render.call(n),n.expandAll.call(n),i&&n.addPersonImage.call(n,i)}i=i||{};var a=i.width||"100%",n=i.height||"100%",d=45*(1/i.scale||1)*16.58,r=45*(1/i.scale||1)*16.58,o={containerId:t,container:$("#"+t),d3Container:d3.select("#"+t),width:d,dimW:d,height:r,dimH:r,visualizationWidth:a||"100%",visualizationHeight:n||"100%",d3vis:void 0,touchDiv:void 0,data:void 0,id:"SystemUWidget",COLOR_PALLETTE:["#1b6ba2","#488436","#d52829","#F53B0C","#972a6b","#8c564b","#dddddd"],loadingDiv:"dummy"};return o.clean=function(){o.container.empty()},o.show=e,o};return t}();