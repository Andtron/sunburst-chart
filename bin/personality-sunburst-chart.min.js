var chartRenderer=require("./personality-chart-renderer"),dependencies={d3:"D3js"};Object.keys(dependencies).forEach(function(t){if("undefined"==typeof window[t])throw new Error(dependencies[t]+" is not present. Personality Sunburst Chart can't render without it.")}),module.exports=function(){"use strict";var t=function(t,e){function i(t,e){console.debug("showVizualization()");var i=o.containerId;document.getElementById(i).innerHTML=null;var n=d3.select("#"+i).append("svg:svg"),d={d3vis:n,data:t,loadingDiv:"dummy",switchState:function(){console.debug("[switchState]")},_layout:function(){console.debug("[_layout]")},showTooltip:function(){console.debug("[showTooltip]")},id:"SystemUWidget",COLOR_PALLETTE:["#1b6ba2","#488436","#d52829","#F53B0C","#972a6b","#8c564b","#dddddd"],expandAll:function(){this.vis.selectAll("g").each(function(){var t=d3.select(this);t.datum().parent&&t.datum().parent.parent&&t.datum().parent.parent.parent&&t.attr("visibility","visible")})},collapseAll:function(){this.vis.selectAll("g").each(function(){var t=d3.select(this);null!==t.datum().parent&&null!==t.datum().parent.parent&&null!==t.datum().parent.parent.parent&&t.attr("visibility","hidden")})},addPersonImage:function(t){if(this.vis&&t){var e=this.vis.append("defs"),i=this.dimW,n=this.dimH,d=Math.min(i,n)/16.58,a=2.46*d,r="user_icon_"+this.id;e.append("pattern").attr("id",r).attr("height",1).attr("width",1).attr("patternUnits","objectBoundingBox").append("image").attr("width",a).attr("height",a).attr("x",d-a/2).attr("y",d-a/2).attr("xlink:href",t).attr("opacity",1).on("dblclick.zoom",null),this.vis.append("circle").attr("r",d).attr("stroke-width",0).attr("fill","url(#"+r+")")}}};d.dimH=o.height,d.dimW=o.width,d.exclude=o.exclude,d.d3vis.attr("width",o.visualizationWidth).attr("height",o.visualizationHeight),d.d3vis.attr("viewBox","0 -30 "+d.dimW+", "+d.dimH),chartRenderer.render.call(d),d.expandAll.call(d),e&&d.addPersonImage.call(d,e)}e=e||{};var n=e.width||"100%",d=e.height||"100%",a=45*(1/e.scale||1)*16.58,r=45*(1/e.scale||1)*16.58,l=e.exclude||[],o={containerId:t,container:document.getElementById(t),d3Container:d3.select("#"+t),width:a,dimW:a,height:r,dimH:r,exclude:l,visualizationWidth:n||"100%",visualizationHeight:d||"100%",d3vis:void 0,touchDiv:void 0,data:void 0,id:"SystemUWidget",COLOR_PALLETTE:["#1b6ba2","#488436","#d52829","#F53B0C","#972a6b","#8c564b","#dddddd"],loadingDiv:"dummy"};return o.clean=function(){o.container.innerHTML=null},o.show=i,o};return t}();